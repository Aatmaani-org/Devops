pipeline {
    agent any

    stages {
        stage ('clean everything and clone ') {
            steps{
                sh ''' sudo rm -rf *
		git clone https://github.com/Aatmaani-org/Devops.git '''
	    }
        }
        stage ('mkdir & clone prod') {
	    steps{
	        sh ''' cd 
		bash  Sharan/shellscript-dev/build.sh'''
            }
	}
        stage ('helm run') {
	    steps{
	        sh '''pwd
                cd /var/lib/jenkins/workspace/sharan/dev/Sharan 
	        helm upgrade --install sharan-dev nodejs -n sharan-dev -f values-dev.yaml'''
	     }
        }
    }

    post { 
      success{
        slackSend channel: 'project-team', message: 'success'
      }
      failure{
        slackSend channel: 'project-team', message: 'job-failed'                                                                                                                                                         }
      }
    }

