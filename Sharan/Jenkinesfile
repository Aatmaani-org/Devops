pipeline {
    agent any

    stages {
        stage ('clean everything and clone ') {
            steps{
                sh ' bash /var/lib/jenkins/workspace/sharan/dev/Sharan/git-clone.sh'
	    }
        }
        stage ('mkdir & clone prod') {
	    steps{
	        sh ''' cd /var/lib/jenkins/workspace/sharan/dev/Sharan/Production
		bash  build.sh'''
            }
	}
        stage ('helm run') {
	    steps{
	        sh '''pwd
                cd /var/lib/jenkins/workspace/sharan/dev/Sharan
	        helm upgrade --install Gost nodejs -n dev -f values-dev.yaml'''
	     }
        }
    }

    post { 
      success{
        slackSend channel: 'project-team', message: 'success'
      }
      failure{
        slackSend channel: 'project-team', message: 'job-failed'                                                                                                                                                         }
      }
    }

